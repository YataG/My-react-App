{"version":3,"sources":["firebase/config.js","context/AuthContext.js","hooks/useAuthContext.js","components/Navbar.js","hooks/useLogout.js","components/SongList.js","components/SongForm.js","pages/Home.js","hooks/useCollection.js","pages/Login.js","hooks/useLogin.js","pages/Signup.js","hooks/useSignup.js","App.js","index.js"],"names":["initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","db","getFirestore","auth","getAuth","AuthContext","createContext","authReducer","state","action","type","user","payload","authIsReady","AuthContextProvider","children","useReducer","dispatch","useEffect","unsub","onAuthStateChanged","console","log","Provider","value","useAuthContext","context","useContext","Error","Navbar","logout","signOut","then","catch","err","message","useLogout","to","onClick","SongList","songs","handleClick","id","a","ref","doc","deleteDoc","className","map","song","title","SongForm","useState","newSong","setNewSong","handleSubmit","e","preventDefault","collection","addDoc","uid","onSubmit","required","onChange","target","Home","c","_q","documents","setDocuments","q","useRef","current","query","where","onSnapshot","snapshot","results","docs","forEach","push","data","useCollection","Login","email","setEmail","password","setPassword","error","setError","login","signInWithEmailAndPassword","res","useLogin","Signup","signup","createUserWithEmailAndPassword","useSignup","App","exact","path","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.2c02dd72.chunk.js","sourcesContent":["import { initializeApp } from 'firebase/app';\nimport { getFirestore } from 'firebase/firestore';\nimport { getAuth } from 'firebase/auth'; //for firebase authorization\n\nconst firebaseConfig = {\n  apiKey: 'AIzaSyA9--qtxgwXzRsPCSVyjRxIfXF5xQ3ygfw',\n  authDomain: 'reactfb-5ee86.firebaseapp.com',\n  projectId: 'reactfb-5ee86',\n  storageBucket: 'reactfb-5ee86.appspot.com',\n  messagingSenderId: '195089275581',\n  appId: '1:195089275581:web:ee323ee1e8a42af92175d4',\n};\n\n//initialize firebase\ninitializeApp(firebaseConfig);\n\n//initialze firestore (database)\nconst db = getFirestore();\n\n//initialize firebase auth\nconst auth = getAuth();\n\nexport { db, auth };\n","import { createContext, useReducer, useEffect } from 'react';\nimport { auth } from '../firebase/config';\nimport { onAuthStateChanged } from 'firebase/auth';\n\nexport const AuthContext = createContext();\n\n//looking for different actions\nexport const authReducer = (state, action) => {\n  switch (action.type) {\n    case 'LOGIN':\n      return { ...state, user: action.payload };\n    case 'LOGOUT':\n      return { ...state, user: null };\n    case 'AUTH_IS_READY':\n      return { user: action.payload, authIsReady: true };\n    default:\n      return state;\n  }\n};\n\nexport const AuthContextProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(authReducer, {\n    user: null,\n    authIsReady: false,\n  });\n  //determines is user is logged in or not\n  useEffect(() => {\n    const unsub = onAuthStateChanged(auth, (user) => {\n      dispatch({ type: 'AUTH_IS_READY', payload: user });\n      unsub();\n    });\n  }, []);\n\n  console.log('AuthContext state:', state);\n\n  return (\n    <AuthContext.Provider value={{ ...state, dispatch }}>\n      {children}\n    </AuthContext.Provider>\n  );\n};\n","import { AuthContext } from '../context/AuthContext';\nimport { useContext } from 'react';\n\nexport const useAuthContext = () => {\n  const context = useContext(AuthContext);\n\n  if (!context) {\n    throw Error('useAuthContextmust be inside an AuthContextProvider');\n  }\n  return context;\n};\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useLogout } from '../hooks/useLogout';\r\n\r\nexport default function Navbar() {\r\n  const { logout } = useLogout();\r\n  return (\r\n    <nav>\r\n      <h1>Create My Playlist</h1>\r\n      <ul>\r\n        <li>\r\n          <Link to=\"/\">Home</Link>\r\n        </li>\r\n        <li>\r\n          <Link to=\"/login\">Login</Link>\r\n        </li>\r\n        <li>\r\n          <Link to=\"/signup\">Signup</Link>\r\n        </li>\r\n        <li onClick={logout}>Logout</li>\r\n      </ul>\r\n    </nav>\r\n  );\r\n}\r\n","import { useAuthContext } from '../hooks/useAuthContext';\n//firebase imports\nimport { auth } from '../firebase/config';\nimport { signOut } from 'firebase/auth';\n\nexport const useLogout = () => {\n  const { dispatch } = useAuthContext();\n\n  const logout = () => {\n    signOut(auth)\n      .then(() => {\n        dispatch({ type: 'LOGOUT' });\n      })\n      .catch((err) => {\n        console.log(err.message);\n      });\n  };\n  return { logout };\n};\n","//firebase imports\r\nimport { db } from '../firebase/config';\r\nimport { doc, deleteDoc } from 'firebase/firestore';\r\n//reference to doc to delete\r\n\r\nexport default function SongList({ songs }) {\r\n  const handleClick = async (id) => {\r\n    const ref = doc(db, 'songs', id);\r\n    await deleteDoc(ref);\r\n    //deletes the document from the collection when clicked\r\n  };\r\n\r\n  return (\r\n    <div className=\"song-list\">\r\n      <ul>\r\n        {songs.map((song) => (\r\n          <li key={song.id} onClick={() => handleClick(song.id)}>\r\n            {song.title}\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n","import { useState } from 'react';\r\nimport { useAuthContext } from '../hooks/useAuthContext';\r\n\r\n//firebase imports\r\nimport { db } from '../firebase/config';\r\nimport { collection, addDoc } from 'firebase/firestore';\r\n\r\nexport default function SongForm() {\r\n  const [newSong, setNewSong] = useState('');\r\n  const { user } = useAuthContext();\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    //adding new documents\r\n    const ref = collection(db, 'songs');\r\n\r\n    await addDoc(ref, { title: newSong, uid: user.uid });\r\n    //assigning a title and user id to each song that is added\r\n\r\n    setNewSong('');\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n      <label>\r\n        <span>Add a new song title:</span>\r\n        <input\r\n          required\r\n          type=\"text\"\r\n          onChange={(e) => setNewSong(e.target.value)}\r\n          value={newSong}\r\n        />\r\n      </label>\r\n      <button>Add</button>\r\n    </form>\r\n  );\r\n}\r\n","import SongList from '../components/SongList';\r\nimport SongForm from '../components/SongForm';\r\nimport { useCollection } from '../hooks/useCollection';\r\nimport { useAuthContext } from '../hooks/useAuthContext';\r\n\r\nexport default function Home() {\r\n  const { user } = useAuthContext();\r\n  const { documents: songs } = useCollection(\r\n    'songs',\r\n    //query for documents by the currently logged in user\r\n    ['uid', '==', user.uid]\r\n  );\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      {songs && <SongList songs={songs} />}\r\n      <SongForm />\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useEffect, useRef } from 'react';\nimport { db } from '../firebase/config';\n\n//firebase imports\nimport { collection, onSnapshot, query, where } from 'firebase/firestore';\n\nexport const useCollection = (c, _q) => {\n  const [documents, setDocuments] = useState(null);\n\n  //set up query\n  const q = useRef(_q).current;\n\n  //real-time data updating\n  //cycling through objects and inserting the new object in the array\n  useEffect(() => {\n    let ref = collection(db, c);\n    //only getting certain items from the collection\n    if (q) {\n      ref = query(ref, where(...q));\n    }\n\n    const unsub = onSnapshot(ref, (snapshot) => {\n      let results = [];\n      snapshot.docs.forEach((doc) => {\n        results.push({ ...doc.data(), id: doc.id });\n      });\n      //updating document with new results\n      setDocuments(results);\n    });\n    return () => unsub();\n  }, [c]);\n\n  return { documents };\n};\n","import { useState } from 'react';\r\nimport { useLogin } from '../hooks/useLogin';\r\n\r\nexport default function Login() {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const { error, login } = useLogin();\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    login(email, password);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>Login</h2>\r\n      <form onSubmit={handleSubmit}>\r\n        <label>\r\n          <span>email:</span>\r\n          <input\r\n            required\r\n            type=\"email\"\r\n            onChange={(e) => setEmail(e.target.value)}\r\n            value={email}\r\n          />\r\n        </label>\r\n        <label>\r\n          <span>password:</span>\r\n          <input\r\n            required\r\n            type=\"password\"\r\n            onChange={(e) => setPassword(e.target.value)}\r\n            value={password}\r\n          />\r\n        </label>\r\n        <button>log in</button>\r\n        {error && <p>{error}</p>}\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n","import { useState } from 'react';\nimport { useAuthContext } from './useAuthContext';\n\n//firebase imports\nimport { auth } from '../firebase/config';\nimport { signInWithEmailAndPassword } from 'firebase/auth';\n\nexport const useLogin = () => {\n  const [error, setError] = useState(null);\n  const { dispatch } = useAuthContext();\n\n  const login = (email, password) => {\n    setError(null);\n    signInWithEmailAndPassword(auth, email, password)\n      .then((res) => {\n        dispatch({ type: 'LOGIN', payload: res.user });\n      })\n      //dispatch updates the state of the user that is logged in\n      .catch((err) => {\n        setError(err.message);\n      });\n  };\n  return { error, login };\n};\n","import { useState } from 'react';\r\nimport { useSignup } from '../hooks/useSignup';\r\n\r\nexport default function Signup() {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const { error, signup } = useSignup();\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    signup(email, password);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>Signup</h2>\r\n      <form onSubmit={handleSubmit}>\r\n        <label>\r\n          <span>email:</span>\r\n          <input\r\n            required\r\n            type=\"email\"\r\n            onChange={(e) => setEmail(e.target.value)}\r\n            value={email}\r\n          />\r\n        </label>\r\n        <label>\r\n          <span>password:</span>\r\n          <input\r\n            required\r\n            type=\"password\"\r\n            onChange={(e) => setPassword(e.target.value)}\r\n            value={password}\r\n          />\r\n        </label>\r\n        <button>sign up</button>\r\n        {error && <p>{error}</p>}\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n","import { useState } from 'react';\nimport { useAuthContext } from './useAuthContext';\n//firebase imports\nimport { auth } from '../firebase/config';\nimport { createUserWithEmailAndPassword } from 'firebase/auth';\n\nexport const useSignup = () => {\n  const [error, setError] = useState(null);\n  const { dispatch } = useAuthContext();\n\n  const signup = (email, password) => {\n    setError(null);\n    createUserWithEmailAndPassword(auth, email, password)\n      .then((res) => {\n        dispatch({ type: 'LOGIN', payload: res.user });\n      })\n      .catch((err) => {\n        setError(err.message);\n      });\n  };\n  return { error, signup };\n};\n","import { BrowserRouter, Switch, Route, Redirect } from 'react-router-dom';\n\n// components\nimport Navbar from './components/Navbar';\nimport { useAuthContext } from './hooks/useAuthContext';\nimport Home from './pages/Home';\nimport Login from './pages/Login';\nimport Signup from './pages/Signup';\n\nfunction App() {\n  const { user, authIsReady } = useAuthContext();\n\n  //prevents display of pages until user authentication is complete\n  return (\n    <div className=\"App\">\n      {authIsReady && (\n        <BrowserRouter>\n          <Navbar />\n          <Switch>\n            <Route exact path=\"/\">\n              {user && <Home />}\n              {!user && <Redirect to=\"/login\" />}\n            </Route>\n            <Route path=\"/signup\">\n              {!user && <Signup />}\n              {user && <Redirect to=\"/\" />}\n            </Route>\n            <Route path=\"/login\">\n              {!user && <Login />}\n              {user && <Redirect to=\"/\" />}\n            </Route>\n          </Switch>\n        </BrowserRouter>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { AuthContextProvider } from './context/AuthContext';\n\nReactDOM.render(\n  <React.StrictMode>\n    <AuthContextProvider>\n      <App />\n    </AuthContextProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}